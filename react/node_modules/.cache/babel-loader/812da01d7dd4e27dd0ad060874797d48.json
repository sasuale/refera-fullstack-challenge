{"ast":null,"code":"var _jsxFileName = \"/media/malanta/03A81F3046E08AF8/Help/REFERA/refera-fullstack-challenge/frontend/src/components/frontend/Order.js\";\nimport React, { useEffect, useState } from 'react';\nimport { Modal, Form, Row, Col, Button } from 'react-bootstrap';\nimport axios from 'axios';\nimport { Link, useNavigate } from 'react-router-dom';\nimport swal from 'sweetalert';\n\nfunction Order() {\n  //\n  const [loading, setLoading] = useState(true);\n  const [order, setOrder] = useState([]);\n  const [orderInput, setOrderInput] = useState({\n    contact_name: '',\n    contact_phone: '',\n    real_estate: '',\n    description: '',\n    deadline: '',\n    company_id: '',\n    category_id: '',\n    error_list: []\n  });\n  const [categoryList, setCategoryList] = useState([]);\n  const [show, setShow] = useState(false); //\n\n  useEffect(() => {\n    let isMountered = true;\n    axios.get('api/list-order').then(res => {\n      if (isMountered) {\n        if (res.data.status === 200) {\n          //\n          console.log(res.data.orders);\n          setOrder(res.data.orders);\n          setLoading(false);\n        }\n      }\n    });\n    return () => {\n      isMountered = false;\n    };\n  }); //\n\n  useEffect(() => {\n    axios.get('api/list-category').then(res => {\n      //\n      if (res.data.status === 200) {\n        console.log(res.data.categories);\n        setCategoryList(res.data.categories);\n      }\n    });\n  }, []); //\n\n  const handleShow = () => setShow(true);\n\n  const handleClose = () => setShow(false); //\n\n\n  const history = useNavigate(); //\n\n  const handleInput = e => {\n    e.persist();\n    setOrderInput({ ...orderInput,\n      [e.target.name]: e.target.value\n    });\n  }; //\n\n\n  const submitOrder = e => {\n    e.preventDefault();\n    const data = {\n      contact_name: orderInput.contact_name,\n      contact_phone: orderInput.contact_phone,\n      real_estate: orderInput.real_estate,\n      description: orderInput.description,\n      deadline: orderInput.deadline,\n      company_id: orderInput.company_id,\n      category_id: orderInput.category_id\n    };\n    axios.post('api/store-order', data).then(res => {\n      if (res.data.status === 200) {\n        //\n        swal(\"Success\", res.data.message, \"success\");\n        document.getElementById('ORDER_FORM').reset();\n        handleClose();\n        history.push('/order');\n      } else if (res.data.status === 400) {\n        //\n        setOrderInput({ ...orderInput,\n          error_list: res.data.errors\n        });\n      } else {//\n      }\n    });\n  }; //\n\n\n  if (loading) {\n    return /*#__PURE__*/React.createElement(\"h4\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 14\n      }\n    }, \"Loading Orders...\");\n  } else {\n    var showOrders = '';\n    showOrders = order.map((item, idx) => {\n      return /*#__PURE__*/React.createElement(\"tr\", {\n        key: idx,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 13\n        }\n      }, /*#__PURE__*/React.createElement(\"th\", {\n        scope: \"col\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 15\n        }\n      }, ++idx), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119,\n          columnNumber: 15\n        }\n      }, item.category.name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120,\n          columnNumber: 15\n        }\n      }, item.contact_name, \" \", item.contact_phone), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 121,\n          columnNumber: 15\n        }\n      }, item.real_estate), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 15\n        }\n      }, item.company.name), /*#__PURE__*/React.createElement(\"td\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123,\n          columnNumber: 15\n        }\n      }, item.deadline));\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(\"div\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"section\", {\n    className: \"masthead bg-default\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"col-lg-12\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 134,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"button\", {\n    onClick: handleShow,\n    className: \"btn btn-secondary btn-sm float-end\",\n    \"data-toggle\": \"modal\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 21\n    }\n  }, \"Open new order\"))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"row\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"table\", {\n    className: \"table table-hover\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"thead\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 141,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"tr\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 142,\n      columnNumber: 23\n    }\n  }, /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 143,\n      columnNumber: 25\n    }\n  }, \"#\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 144,\n      columnNumber: 25\n    }\n  }, \"Category\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 25\n    }\n  }, \"Contact\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 25\n    }\n  }, \"Agency\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 25\n    }\n  }, \"Company\"), /*#__PURE__*/React.createElement(\"th\", {\n    scope: \"col\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 148,\n      columnNumber: 25\n    }\n  }, \"Deadline\"))), /*#__PURE__*/React.createElement(\"tbody\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 21\n    }\n  }, showOrders))))), /*#__PURE__*/React.createElement(Modal, {\n    show: show,\n    onHide: handleClose,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 159,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Header, {\n    closeButton: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 160,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Modal.Title, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 161,\n      columnNumber: 15\n    }\n  }, \"New Order\")), /*#__PURE__*/React.createElement(Modal.Body, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Form, {\n    onSubmit: submitOrder,\n    id: \"ORDER_FORM\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 168,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 19\n    }\n  }, \"Contact Name\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Contact Name\",\n    name: \"contact_name\",\n    onChange: handleInput,\n    value: orderInput.contact_name,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 173,\n      columnNumber: 19\n    }\n  }, \"Contact Phone\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Contact Phone\",\n    name: \"contact_phone\",\n    onChange: handleInput,\n    value: orderInput.contact_phone,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 19\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 19\n    }\n  }, \"Real Estate Agency\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Real Estate Agency\",\n    name: \"real_estate\",\n    onChange: handleInput,\n    value: orderInput.real_estate,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 178,\n      columnNumber: 19\n    }\n  }))), /*#__PURE__*/React.createElement(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 181,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 182,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 23\n    }\n  }, \"Order Description\"), /*#__PURE__*/React.createElement(Form.Control, {\n    as: \"textarea\",\n    placeholder: \"Description\",\n    name: \"description\",\n    onChange: handleInput,\n    value: orderInput.description,\n    rows: 3,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 23\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 21\n    }\n  }, \"Company\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"text\",\n    placeholder: \"Company\",\n    name: \"company_id\",\n    onChange: handleInput,\n    value: orderInput.company_id,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(Row, {\n    className: \"mb-3\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 8,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 196,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 21\n    }\n  }, \"Select the order category\"), /*#__PURE__*/React.createElement(Form.Select, {\n    defaultValue: \"Select One Category\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 199,\n      columnNumber: 21\n    }\n  }, /*#__PURE__*/React.createElement(\"option\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 23\n    }\n  }, \"Select One Category\"), categoryList.map(item => {\n    return /*#__PURE__*/React.createElement(\"option\", {\n      value: item.id,\n      key: item.id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 204,\n        columnNumber: 35\n      }\n    }, item.name);\n  })))), /*#__PURE__*/React.createElement(Col, {\n    xs: 4,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 211,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Group, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 212,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(Form.Label, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 21\n    }\n  }, \"Deadline\"), /*#__PURE__*/React.createElement(Form.Control, {\n    type: \"date\",\n    placeholder: \"Deadline\",\n    name: \"deadline\",\n    onChange: handleInput,\n    value: orderInput.deadline,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 21\n    }\n  })))), /*#__PURE__*/React.createElement(Button, {\n    variant: \"success\",\n    type: \"submit\",\n    block: true,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 218,\n      columnNumber: 17\n    }\n  }, \"Save\"))), /*#__PURE__*/React.createElement(Modal.Footer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 221,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    onClick: handleClose,\n    variant: \"secondary\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 15\n    }\n  }, \"Close\"))));\n}\n\nexport default Order;","map":{"version":3,"sources":["/media/malanta/03A81F3046E08AF8/Help/REFERA/refera-fullstack-challenge/frontend/src/components/frontend/Order.js"],"names":["React","useEffect","useState","Modal","Form","Row","Col","Button","axios","Link","useNavigate","swal","Order","loading","setLoading","order","setOrder","orderInput","setOrderInput","contact_name","contact_phone","real_estate","description","deadline","company_id","category_id","error_list","categoryList","setCategoryList","show","setShow","isMountered","get","then","res","data","status","console","log","orders","categories","handleShow","handleClose","history","handleInput","e","persist","target","name","value","submitOrder","preventDefault","post","message","document","getElementById","reset","push","errors","showOrders","map","item","idx","category","company","id"],"mappings":"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","sourcesContent":["import React, {useEffect, useState} from 'react';\r\nimport { Modal, Form, Row, Col, Button } from 'react-bootstrap';\r\nimport axios from 'axios';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport swal from 'sweetalert';\r\n\r\n\r\nfunction Order() {\r\n  //\r\n  const [loading, setLoading] = useState(true);\r\n  const [order, setOrder] = useState([]);\r\n  const [orderInput, setOrderInput] = useState({\r\n      contact_name: '',\r\n      contact_phone: '',\r\n      real_estate: '',\r\n      description: '',\r\n      deadline: '',\r\n      company_id: '',\r\n      category_id: '',\r\n      error_list: [],\r\n  });\r\n  const [categoryList, setCategoryList] = useState([]);\r\n  const [show, setShow] = useState(false);\r\n\r\n  //\r\n  useEffect(() => {\r\n      let isMountered = true;\r\n\r\n      axios.get('api/list-order').then(res => {\r\n          if(isMountered)\r\n          {\r\n              if(res.data.status === 200)\r\n              {\r\n                  //\r\n                  console.log(res.data.orders);\r\n                  setOrder(res.data.orders);\r\n                  setLoading(false);\r\n              }\r\n          }\r\n      });\r\n\r\n      return () => {\r\n          isMountered = false;\r\n      }\r\n  });\r\n\r\n  //\r\n  useEffect(() => {\r\n\r\n    axios.get('api/list-category').then(res => {\r\n        //\r\n        if(res.data.status === 200)\r\n        {\r\n            console.log(res.data.categories);\r\n            setCategoryList(res.data.categories);\r\n        }\r\n    });\r\n}, [])\r\n\r\n  //\r\n  const handleShow = () => setShow(true);\r\n  const handleClose = () => setShow(false);\r\n\r\n  //\r\n  const history = useNavigate();\r\n  \r\n  //\r\n  const handleInput = (e) => {\r\n      e.persist();\r\n      setOrderInput({...orderInput, [e.target.name]: e.target.value});\r\n  }\r\n\r\n    //\r\n    const submitOrder = (e) => {\r\n      e.preventDefault();\r\n  \r\n      const data = {\r\n          contact_name: orderInput.contact_name,\r\n          contact_phone: orderInput.contact_phone,\r\n          real_estate: orderInput.real_estate,\r\n          description: orderInput.description,\r\n          deadline: orderInput.deadline,\r\n          company_id: orderInput.company_id,\r\n          category_id: orderInput.category_id,\r\n      }\r\n  \r\n      axios.post('api/store-order', data).then(res => {\r\n          if(res.data.status === 200)\r\n          {\r\n              //\r\n              swal(\"Success\", res.data.message, \"success\");\r\n              document.getElementById('ORDER_FORM').reset();\r\n              handleClose();\r\n              history.push('/order');\r\n          }\r\n          else if(res.data.status === 400)\r\n          {\r\n              //\r\n              setOrderInput({...orderInput, error_list: res.data.errors});\r\n          }\r\n          else{\r\n              //\r\n          }\r\n      });\r\n  }\r\n\r\n  //\r\n  if(loading)\r\n  {\r\n      return <h4>Loading Orders...</h4>\r\n  }\r\n  else\r\n  {\r\n      var showOrders = '';\r\n      showOrders = order.map((item, idx) => {\r\n          return (\r\n            <tr key={idx}>\r\n              <th scope=\"col\">{++idx}</th>\r\n              <td>{item.category.name}</td>\r\n              <td>{item.contact_name} {item.contact_phone}</td>\r\n              <td>{item.real_estate}</td>\r\n              <td>{item.company.name}</td>\r\n              <td>{item.deadline}</td>\r\n            </tr>\r\n          )\r\n      });\r\n  }\r\n\r\n  return (\r\n      <div>\r\n        <section className=\"masthead bg-default\">\r\n              <div className=\"container\">\r\n                <div className=\"row mb-3\">\r\n                  <div className=\"col-lg-12\">\r\n                    <button onClick={handleShow} className=\"btn btn-secondary btn-sm float-end\" data-toggle=\"modal\">Open new order</button>\r\n                  </div>\r\n                </div>\r\n\r\n                <div className=\"row\">\r\n                  <table className=\"table table-hover\">\r\n                    <thead>\r\n                      <tr>\r\n                        <th scope=\"col\">#</th>\r\n                        <th scope=\"col\">Category</th>\r\n                        <th scope=\"col\">Contact</th>\r\n                        <th scope=\"col\">Agency</th>\r\n                        <th scope=\"col\">Company</th>\r\n                        <th scope=\"col\">Deadline</th>\r\n                      </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                      {showOrders}\r\n                    </tbody>\r\n                  </table>\r\n                </div>\r\n              </div>\r\n          </section>\r\n\r\n          <Modal show={show} onHide={handleClose}>\r\n            <Modal.Header closeButton>\r\n              <Modal.Title>\r\n                New Order\r\n              </Modal.Title>\r\n            </Modal.Header>\r\n            <Modal.Body>\r\n              <Form onSubmit={submitOrder} id=\"ORDER_FORM\">\r\n              <Row className=\"mb-3\">\r\n                <Col xs={4}>\r\n                  <Form.Label>Contact Name</Form.Label>\r\n                  <Form.Control type=\"text\" placeholder=\"Contact Name\" name=\"contact_name\" onChange={handleInput} value={orderInput.contact_name}  />\r\n                </Col>\r\n                <Col xs={4}>\r\n                  <Form.Label>Contact Phone</Form.Label>\r\n                  <Form.Control type=\"text\" placeholder=\"Contact Phone\" name=\"contact_phone\" onChange={handleInput} value={orderInput.contact_phone}  />\r\n                </Col>\r\n                <Col xs={4}>\r\n                  <Form.Label>Real Estate Agency</Form.Label>\r\n                  <Form.Control type=\"text\" placeholder=\"Real Estate Agency\" name=\"real_estate\" onChange={handleInput} value={orderInput.real_estate}  />\r\n                </Col>\r\n              </Row>\r\n              <Row className=\"mb-3\">\r\n                <Col xs={8}>\r\n                  <Form.Group className=\"mb-3\">\r\n                      <Form.Label>Order Description</Form.Label>\r\n                      <Form.Control as=\"textarea\" placeholder=\"Description\" name=\"description\" onChange={handleInput} value={orderInput.description}  rows={3} />\r\n                  </Form.Group>\r\n                  </Col>\r\n                  <Col xs={4}>\r\n                  <Form.Group>\r\n                    <Form.Label>Company</Form.Label>\r\n                    <Form.Control type=\"text\" placeholder=\"Company\" name=\"company_id\" onChange={handleInput} value={orderInput.company_id}  />\r\n                </Form.Group>\r\n                  </Col>\r\n                  </Row>\r\n                  <Row className=\"mb-3\">\r\n                  <Col xs={8}>\r\n                  <Form.Group>\r\n                    <Form.Label>Select the order category</Form.Label>\r\n                    <Form.Select defaultValue=\"Select One Category\">\r\n                      <option>Select One Category</option>\r\n                      {\r\n                          categoryList.map((item) => {\r\n                              return (\r\n                                  <option value={item.id} key={item.id}>{item.name}</option>\r\n                              )\r\n                          })\r\n                      }\r\n                    </Form.Select>\r\n                  </Form.Group>\r\n                  </Col>\r\n                  <Col xs={4}>\r\n                  <Form.Group>\r\n                    <Form.Label>Deadline</Form.Label>\r\n                    <Form.Control type=\"date\" placeholder=\"Deadline\" name=\"deadline\" onChange={handleInput} value={orderInput.deadline}  />\r\n                </Form.Group>\r\n                  </Col>\r\n                </Row>\r\n                <Button variant=\"success\" type=\"submit\" block>Save</Button>\r\n              </Form>\r\n            </Modal.Body>\r\n            <Modal.Footer>\r\n              <Button onClick={handleClose} variant=\"secondary\">Close</Button>\r\n            </Modal.Footer>\r\n          </Modal>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Order;"]},"metadata":{},"sourceType":"module"}